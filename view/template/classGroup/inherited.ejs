<% layout(_view.get(_layout)) %>
<% block('title', 'Class group') %>
<%
const columnTemplate = _view.get('_part/group/columns');
const overriddenTemplate = _view.get('_part/attr/overridden');
const relationTemplate = _view.get('_part/attr/relation');
const selectTemplate = _view.get('_part/attr/select');
const staticTemplate = _view.get('_part/attr/static');
const stringTemplate = _view.get('_part/attr/string');
%>
<%- include(staticTemplate, {
    attr: 'original',
    displayValue: model.getRelatedTitle('original'),
    url: ['update', model.rel('original')]
}) %>

<%- include(overriddenTemplate, {
    attr: 'label',
    template: stringTemplate
}) %>

<%- include(columnTemplate, {
    items: [{
        template: overriddenTemplate,
        params: {
            attr: 'type',
            template: selectTemplate,
            params: {
                items: 'labels'
            }
        }
    }, {
        template: overriddenTemplate,
        params: {
            attr: 'orderNumber',
            template: stringTemplate
        }
    }]
}) %>

<%- include(overriddenTemplate, {
    attr: 'parent',
    template: selectTemplate,
    params: {
        items: validParents,
        update: _url('class-group/update')
    }
}) %>

<%- include(staticTemplate, {
    attr: 'class',
    displayValue: model.getRelatedTitle('class'),
    url: ['class/update', model.rel('class')]
}) %>

<%- include(_view.get('_part/group/tabs'), {
    items: [{
        id: 'Main',
        active: true,
        content: _view.getInternalTemplate('_tabInheritedMain')
    }, {
        id: 'Action binders',
        content: {
            template: relationTemplate,
            attr: 'actionBinder',
            css: 'no-label',
            data: {
                columns: [{
                    name: 'show'
                }, {
                    name: 'require'
                }, {
                    name: 'enable'
                }, {
                    name: 'value'
                }],
                link: null,
                unlink: null
            }
        }
    },{
        id: 'children',
        label: 'Children',
        content: {
            template: relationTemplate,
            attr: 'children',
            css: 'no-label',
            data: {
                columns: [{
                    name: 'name'
                },{
                    name: 'label'
                },{
                    name: 'type'
                },{
                    name: 'orderNumber'
                }],
                order: {orderNumber: 1},
                link: null,
                unlink: null,
                create: ['create-by-group', model],
                modalSort:true
            }
        }
    },{
        id: 'classAttrs',
        label: 'Class attributes',
        content: {
            template: relationTemplate,
            attr: 'classAttrs',
            css: 'no-label',
            data: {
                columns: [{
                    name: 'name',
                    searchable: true
                }, {
                    name: 'label',
                    searchable: true
                }, {
                    name: 'type',
                    format: 'label'
                }, {
                    name: 'orderNumber',
                    sortable: true
                }, {
                    name: 'inherited',
                    translateData: ''
                }],
                order: {orderNumber: 1},
                link: null,
                unlink: null,
                create: ['class-attr/create-by-group', model],
                delete: null,
                showTop: true,
                modalSort: true
            }
        }
    },{
        id: 'viewAttrs',
        label: 'View attributes',
        content: {
            template: relationTemplate,
            attr: 'viewAttrs',
            css: 'no-label',
            data: {
                columns: [{
                    name: 'classAttr'
                },{
                    name: 'label'
                },{
                    name: 'orderNumber'
                }],
                order: {orderNumber: 1},
                link: null,
                unlink: null,
                create: null,
                delete: null
            }
        }
    },{
        id: 'viewGroups',
        label: 'View groups',
        content: {
            template: relationTemplate,
            attr: 'viewGroups',
            css: 'no-label',
            data: {
                columns: [{
                    name: 'label'
                },{
                    name: 'parent'
                },{
                    name: 'type'
                },{
                    name: 'orderNumber'
                }],
                order: {orderNumber: 1},
                link: null,
                unlink: null,
                create: null,
                delete: null
            }
        }
    }]
}) %>