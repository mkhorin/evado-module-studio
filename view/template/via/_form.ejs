<% layout(_view.get(_layout)) %>
<% block('tab', 'Via') %>

<%- include(_view.get('_part/attr/select'), {
    attr: 'refClass',
    items: null,
    displayValue: model.getRelatedTitle('refClass'),
    select2: {ajax: {url: _url('class/list-select')}},
    update: _url('class/update')
}) %>

<%- include(_view.get('_part/group/columns'), {
    items: [{
        template: _view.get('_part/attr/select'),
        params: {
            attr: 'refAttr',
            items: null,
            displayValue: model.getRelatedTitle('refAttr'),
            select2: {ajax: {url: _url('class-attr/list-select')}},
            depends: [{attr: 'refClass', param: 'pid'}],
            actionBinder: {enable: ['NOT EMPTY', 'refClass']},
            update: _url('class-attr/update')
        }
    },{
        template: _view.get('_part/attr/select'),
        params: {
            attr: 'linkAttr',
            items: null,
            displayValue: model.getRelatedTitle('linkAttr'),
            select2: {ajax: {url: _url('class-attr/list-select')}},
            depends: [{attr: 'refClass', param: 'pid'}],
            actionBinder: {enable: ['NOT EMPTY', 'refClass']},
            update: _url('class-attr/update')
        }
    }]
}) %>